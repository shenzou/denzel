<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
        integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <title>Random film displayer</title>
    <script type="text/javascript">
    /*
        function searchParameters() {
            var metaResult = document.getElementById("rangeMeta");
            var limitResult = document.getElementById("resultLimit");
            
            var resultsArray = function(){
                this.get = function(callback){
                    var httpRequest = new XMLHttpRequest();
                    httpRequest.onreadystatechange = function(){
                        if(httpRequest.readyState == 4 && httpRequest.status == 200)
                        {
                            callback(httpRequest.responseText);
                        }
                    }
                    var URl = "http://localhost:9292/movies/search?limit="+limitResult+"&metascore="+metaResult;
                    httpRequest.open("GET", URl, true);
                    httpRequest.send(null);
                }
            }
            return resultsArray;
            
            var request = new XMLHttpRequest();
            var URl = "http://localhost:9292/movies/search?limit="+limitResult+"&metascore="+metaResult;
            request.open('GET', URl, true);

            request.onload = function () {
                if (request.status >= 200 && request.status < 400) {
                    // Success!
                    var data = JSON.parse(request.responseText);
                    var link;
                    for (var t = 0; t < data.length; t++) {
                        link = document.createElement("a" + t);
                        var ulist = document.getElementById("list");
                        var newItem = document.createElement("li");
                        newItem.appendChild(link);
                        ulist.appendChild(newItem);
                        link.textContent = 'Title: ' + data[t].title + ', Description: ' + data[t].synopsis;
                        link.setAttribute('data-ind', t); // ADDED A DATA ATTRIBUTE TO STORE A INDEX VALUE
                        if (typeof window.addEventListener === 'function') {
                            (function (_td) {
                                link.addEventListener('click', function () {
                                    var indexId = this.getAttribute('data-ind'); //GETTING DATA ATTRIBUTE VALUE
                                    indexId = parseInt(indexId); //PARSE FROM STRING TO INTEGER
                                    alert(data[indexId].relation); // YOU WILL GET THE ACTUAL RELATION VALUE.

                                });
                            })(link);
                        }
                    }
                } else {
                    // We reached our target server, but it returned an error

                }
            };

            request.onerror = function () {
                // There was a connection error of some sort
            };

            request.send();
        }
        */
    </script>
</head>

<body>
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand" href="#">Denzel's filmography</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
                <li class="nav-item active">
                    <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="#">I'm lucky</a>
                </li>
                <li class="nav-item dropdown">
                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button"
                        data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        Custom search
                    </a>
                    <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                        <form>
                            <label for="customRange3">Minimum metascore</label>
                            <fieldset>
                                <input type="range" class="custom-range" name="Meta" min="0" max="100" step="1"
                                    id="rangeMeta" oninput="resultMeta.value=parseInt(Meta.value)">
                                <output name="resultMeta">50</output>
                            </fieldset>
                        </form>
                        <form>
                            <label for="customRange3">Results limit</label>
                            <fieldset>
                                <input type="range" class="custom-range" name="Limit" min="0" max="30" step="1"
                                    id="rangeLimit" oninput="resultLimit.value=parseInt(Limit.value)">
                                <output name="resultLimit">15</output>
                            </fieldset>
                        </form>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="#">Search</a>
                    </div>
                </li>
                <li class="nav-item">
                    <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
                </li>
            </ul>
        </div>
    </nav>

    <script type="text/javascript">
        searchParameters();
    </script>



    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
        integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"
        integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"
        integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM"
        crossorigin="anonymous"></script>
</body>

</html>